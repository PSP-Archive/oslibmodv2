<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Creating or loading images</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__image__creation.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Creating or loading images<div class="ingroups"><a class="el" href="group__image.html">Images</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga120ad0461bc8369f9431bff653d25217"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__creation.html#ga120ad0461bc8369f9431bff653d25217">oslCreateImage</a> (int larg, int haut, short location, short pixelFormat)</td></tr>
<tr class="separator:ga120ad0461bc8369f9431bff653d25217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab21768e682147881f80ef53f80bd10e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__creation.html#gab21768e682147881f80ef53f80bd10e5">oslDeleteImage</a> (<a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *img)</td></tr>
<tr class="separator:gab21768e682147881f80ef53f80bd10e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf193a8cfb42ac15bdf1a291e16fef428"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__creation.html#gaf193a8cfb42ac15bdf1a291e16fef428">oslLoadImageFile</a> (char *filename, int location, int pixelFormat)</td></tr>
<tr class="separator:gaf193a8cfb42ac15bdf1a291e16fef428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9380086a5160987289950968b7f85eef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__creation.html#ga9380086a5160987289950968b7f85eef">oslLoadImageFilePNG</a> (char *filename, int location, int pixelFormat)</td></tr>
<tr class="separator:ga9380086a5160987289950968b7f85eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51f29268e8545cc421c76ea66f038ee4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__creation.html#ga51f29268e8545cc421c76ea66f038ee4">oslLoadImageFileJPG</a> (char *filename, int location, int pixelFormat)</td></tr>
<tr class="separator:ga51f29268e8545cc421c76ea66f038ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeddad4aa1cfdaf6ac3fdb2452f79443b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__creation.html#gaeddad4aa1cfdaf6ac3fdb2452f79443b">oslLoadImageFileGIF</a> (char *filename, int location, int pixelFormat)</td></tr>
<tr class="separator:gaeddad4aa1cfdaf6ac3fdb2452f79443b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f1f6627431d0f7a279cd7e6a1db0b8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__creation.html#ga8f1f6627431d0f7a279cd7e6a1db0b8a">oslSetImageAutoSwizzle</a> (int enabled)</td></tr>
<tr class="separator:ga8f1f6627431d0f7a279cd7e6a1db0b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gab1815904910795cb4bc2f204446fe0c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__creation.html#gab1815904910795cb4bc2f204446fe0c7">osl_alignBuffer</a></td></tr>
<tr class="separator:gab1815904910795cb4bc2f204446fe0c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Creating or loading images in OSLib. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga120ad0461bc8369f9431bff653d25217"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a>* oslCreateImage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>larg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>haut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>pixelFormat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates an empty image. Please note that the image is initially filled with random values, you should take care to clear it by yourself with oslClearImage! </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">larg</td><td>Width of the image. The real image size will be aligned to the next power of two and so that an image line contains at least 16 bytes. </td></tr>
    <tr><td class="paramname">haut</td><td>Height of the image. The real image height will be aligned to the next multiple of 8 to make swizzling possible. </td></tr>
    <tr><td class="paramname">location</td><td>Location of the image (either OSL_IN_VRAM or OSL_IN_RAM) </td></tr>
    <tr><td class="paramname">pixelFormat</td><td>Format of pixels on the image. The pixel format directly defines the color type, precision and the room taken by the image. Also, biggest images are drawn slower (same applies to writting when they're set as drawbuffer). So, avoid using OSL_PF_8888 because it takes a lot of room and is slower. But the render is nicer of course ;) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The return is NULL if the image could not be created! Always check for a NULL pointer else your program will CRASH when you'll try to use that image! (the PSP will turn off by itself after ten seconds).</dd></dl>
<p><b>Important:</b> The maximum size of an image is 512x512! None of the height or width can exceed 512 (for example 10x600 is invalid, 10x500 is okay). <b>Note:</b> Empty created images are never swizzled automatically, even though the oslSetImageAutoSwizzle parameter is true. Do NOT pass OSL_SWIZZLED or OSL_UNSWIZZLED to oslCreateImage! </p>

</div>
</div>
<a class="anchor" id="gab21768e682147881f80ef53f80bd10e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslDeleteImage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes an image previously created or loaded. </p>

</div>
</div>
<a class="anchor" id="gaf193a8cfb42ac15bdf1a291e16fef428"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a>* oslLoadImageFile </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pixelFormat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads an image from a file. You can select its location and pixel format, the rest is done automatically. </p><pre class="fragment">Don't forget to check if the returned image is NULL before using it! In this case, display a gentleful message to the user telling him he has not read the readme and put the wrong files :p

\b Important: Avoid using this function, as it will automatically detect the format depending on the file extension. This means support for ALL formats will be added to your code, weightening your
application a lot! Use specific routines instead like oslLoadImageFilePNG, oslLoadImageFileJPG, etc. to spare some precious RAM space.

\b Important (bis): When loading any image, see considerations with #oslCreateImage, they apply to loaded images as well (namely the 512x512 limit).</pre> 
</div>
</div>
<a class="anchor" id="ga9380086a5160987289950968b7f85eef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a>* oslLoadImageFilePNG </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pixelFormat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads a PNG file. Same remark as for oslLoadImageFile apply. </p>

</div>
</div>
<a class="anchor" id="ga51f29268e8545cc421c76ea66f038ee4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a>* oslLoadImageFileJPG </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pixelFormat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads a JPG file. Same remark as for oslLoadImageFile apply.</p>
<p>Note: The actual JPG decompressor is very simple, and doesn't support JPG files of a too high quality (it will crash in this case). Avoid using JPG files with a quality factor of more than 90%. Also, if you let users the choice of using JPG files, you should specify this limitation in your instructions. </p>

</div>
</div>
<a class="anchor" id="gaeddad4aa1cfdaf6ac3fdb2452f79443b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a>* oslLoadImageFileGIF </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pixelFormat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads a GIF file. Same remark as for oslLoadImageFile apply. </p>

</div>
</div>
<a class="anchor" id="ga8f1f6627431d0f7a279cd7e6a1db0b8a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void oslSetImageAutoSwizzle </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Controls whether the images should automatically be swizzled upon loading. You can specify OSL_UNSWIZZLED to get a raw image, which you can then access using the data member of the image. Enabled by default, but wasn't in the first versions of OSLib.</p>
<div class="fragment"><div class="line"><span class="comment">//Force loading image as unswizzled</span></div>
<div class="line"><a class="code" href="group__image__creation.html#ga9380086a5160987289950968b7f85eef">oslLoadImageFilePNG</a>(<span class="stringliteral">&quot;test.png&quot;</span>, <a class="code" href="group__image.html#gga163a37d9c3999633b0dc387e15453845a40b7f6fda376d3390a38f2d2629a39f7">OSL_IN_RAM</a> | <a class="code" href="group__image.html#gga163a37d9c3999633b0dc387e15453845ab52405f9e4ca865bd0447ba1c1ef39db">OSL_UNSWIZZLED</a>, <a class="code" href="group__image.html#ggab3528cc93235f479e65017b9cc0a2259a5a0a8c1193ea60a42d6c6dcd6fb62f18">OSL_PF_5551</a>);</div>
<div class="line"><span class="comment">//Force swizzled</span></div>
<div class="line"><a class="code" href="group__image__creation.html#ga9380086a5160987289950968b7f85eef">oslLoadImageFilePNG</a>(<span class="stringliteral">&quot;test.png&quot;</span>, <a class="code" href="group__image.html#gga163a37d9c3999633b0dc387e15453845a40b7f6fda376d3390a38f2d2629a39f7">OSL_IN_RAM</a> | <a class="code" href="group__image.html#gga163a37d9c3999633b0dc387e15453845ae2c4d77e7d2279c3ad822bf9275ca273">OSL_SWIZZLED</a>, <a class="code" href="group__image.html#ggab3528cc93235f479e65017b9cc0a2259a5a0a8c1193ea60a42d6c6dcd6fb62f18">OSL_PF_5551</a>);</div>
<div class="line"><span class="comment">//Will swizzle if osl_autoSwizzleImages is set to true.</span></div>
<div class="line"><a class="code" href="group__image__creation.html#ga9380086a5160987289950968b7f85eef">oslLoadImageFilePNG</a>(<span class="stringliteral">&quot;test.png&quot;</span>, <a class="code" href="group__image.html#gga163a37d9c3999633b0dc387e15453845a40b7f6fda376d3390a38f2d2629a39f7">OSL_IN_RAM</a>, <a class="code" href="group__image.html#ggab3528cc93235f479e65017b9cc0a2259a5a0a8c1193ea60a42d6c6dcd6fb62f18">OSL_PF_5551</a>);</div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="gab1815904910795cb4bc2f204446fe0c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osl_alignBuffer</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Controls advanced parameters when creating an image. Don't use it or be prepared to an eventual breaking change in the future. </p><pre class="fragment">Add the following values:
    - 1: Align the image sizes horizontally to a power of two
    - 2: Align the vertical size to a multiple of 8 (mandatory for swizzling)

Default value: 3.</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
